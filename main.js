document.addEventListener("DOMContentLoaded",(function(){let e=null;const t="song.mp3",n="music2.mp3";let o=new Audio(t)||null;e=t;let r=!1,s=0,i=0,a=!1;const l=["memories0.jpg","memories1.jpg","memories2.jpg","memories3.jpg","memories4.jpg","memories5.jpg","memories6.jpg","memories7.jpg","memories8.jpg","memories9.jpg","memories10.jpg","memories11.jpg","memories12.jpg","memories13.jpg","memories14.jpg","memories15.jpg","memories16.jpg","memories17.jpg","memories18.jpg","memories19.jpg","memories20.jpg","memories21.jpg"],d=document.querySelectorAll("main .container")[0],c=document.querySelectorAll("main .container")[1],u=document.getElementById("play-btn"),m=document.querySelector(".progress-truck"),p=document.querySelector(".progress-bar"),y=document.querySelectorAll(".time-indicator"),g=document.getElementById("audio-overlay"),f=document.getElementById("restart-audio"),v=document.querySelector("#question-tag"),h=document.querySelector(".question-overlay"),L=document.querySelector(".controls-actions"),E=L.children[0],q=L.children[1],S=document.querySelector(".controls-buttons"),T=S.children[0],b=S.children[1],k=S.children[2];function w(e){M.forEach((t=>{const n=t.querySelector(".controls span:nth-child(1)");e?(n.innerHTML='<i class="fas fa-pause"></i>',n.style.backgroundColor="#007bff",n.style.color="#fff"):(n.innerHTML='<i class="fas fa-play"></i>',n.style.backgroundColor="#fff",n.style.color="#202020")}))}const M=document.querySelectorAll(".friend");function j(){const e=d.scrollHeight-d.clientHeight,t=o.currentTime/o.duration*e;d.scrollTo({top:t,behavior:"smooth"})}function C(){const e=o.currentTime/o.duration*100;p.style.width=e+"%";const t=Math.floor(o.currentTime),n=Math.floor(t/60),r=t%60,s=`${n<10?"0":""}${n}:${r<10?"0":""}${r}`;Math.floor(o.duration/60),Math.floor(o.duration%60);y.forEach((e=>{e.textContent=s}))}w(!1),M.forEach(((e,t)=>{const n=[],s=e.querySelector(".controls span:nth-child(1)"),i=e.querySelector(".controls span:nth-child(2)"),l=e.querySelector(".controls span:nth-child(3)"),d=e.querySelector(".controls span:nth-child(4)");s.addEventListener("click",(()=>{r=!r,r?o.play():o.pause(),w(r)})),i.addEventListener("click",(()=>{!function(e){const t=document.getElementById("notification-container");t.textContent=e,t.style.display="block",setTimeout((()=>{t.style.display="none"}),3e3)}(`${e.querySelector(".friend-name").childNodes[0].textContent.trim()}, contact not added`),o.pause(),w(!1),r=!1})),l.addEventListener("click",(()=>{r=!r,o.muted=r,M.forEach((e=>{e.querySelector(".controls span:nth-child(3)").classList.toggle("muted",r)})),l.classList.toggle("muted",r)})),d.addEventListener("click",(()=>{a=!a;e.querySelectorAll(".friend-description p").forEach(((e,t)=>{a?(n[t]=n[t]||e.textContent,e.textContent=e.getAttribute("data-italian")||e.textContent):e.textContent=n[t]||e.textContent})),d.classList.toggle("translating",a),o.pause(),w(!1),r=!1}))})),function(){const e=document.querySelector(".container"),t=Array.from(document.querySelectorAll(".friend"));t.sort(((e,t)=>{const n=e.querySelector(".friend-name").textContent.toUpperCase(),o=t.querySelector(".friend-name").textContent.toUpperCase();return n<o?-1:n>o?1:0})),t.forEach((t=>{e.removeChild(t)})),t.forEach((t=>{e.appendChild(t)}))}(),o.addEventListener("timeupdate",(()=>{j(),C()})),u.addEventListener("click",(()=>{o.paused?(o.play(),u.innerHTML='<i class="fas fa-pause"></i>',r=!0):(o.pause(),u.innerHTML="▶",r=!1),w(r)})),o.addEventListener("ended",(()=>{console.log("Audio has ended"),w(!1),r=!1,setTimeout((()=>{g.style.display="flex"}),1e3)})),f.addEventListener("click",(()=>{o.currentTime=0,o.play(),g.style.display="none",u.innerHTML='<i class="fas fa-pause"></i>',T.innerHTML='<i class="fas fa-pause"></i>',w(!0),d.scrollTop=0,r=!0})),document.querySelector("#close-audio-overlay").addEventListener("click",(()=>{g.style.display="none"})),o.addEventListener("seeked",j),m.addEventListener("click",(e=>{const t=m.clientWidth,n=e.offsetX/t*o.duration;o.currentTime=n})),v.addEventListener("click",(()=>{g.style.display="none",h.classList.add("visible")})),E.addEventListener("click",(()=>{h.classList.remove("visible"),c.style.display="flex",d.style.display="none",c.scrollIntoView({behavior:"smooth",block:"center"})})),q.addEventListener("click",(()=>{h.classList.remove("visible"),o.currentTime=0,o.play(),g.style.display="none",u.innerHTML='<i class="fas fa-pause"></i>',w(!0),d.scrollTop=0,r=!0})),k.addEventListener("click",(()=>{o&&!o.paused&&(o.pause(),r=!1),c.style.display="none",d.style.display="flex",d.scrollTop=0,u.innerHTML="▶",e=t,o=new Audio(e),o.addEventListener("timeupdate",(()=>{j(),C()})),o.addEventListener("ended",(()=>{console.log("Audio has ended"),w(!1),r=!1,setTimeout((()=>{g.style.display="flex"}),1e3)}))})),T.addEventListener("click",(()=>{o&&r?(o.pause(),r=!1,T.innerHTML='<i class="fas fa-play"></i>'):(e!==n&&(e=n,o=new Audio(e)),o.play(),r=!0,T.innerHTML='<i class="fas fa-pause"></i>',o.addEventListener("timeupdate",(()=>{C(),H(),o.currentTime>=10&&(b.style.opacity="1",b.style.pointerEvents="auto")})),o.addEventListener("ended",(()=>{T.innerHTML='<i class="fas fa-play"></i>',g.style.display="flex",b.style.opacity="0",b.style.pointerEvents="none",s=0,r=!1})),o.addEventListener("seeked",(()=>{s=A.findIndex((e=>o.currentTime>=e.start&&o.currentTime<=e.end)),s=-1===s?0:s,H()}))),H()})),b.addEventListener("click",(()=>{e!==n&&(e=n,o=new Audio(e)),o&&r?document.querySelector(".fullscreenoverlay").style.display="flex":(o.play(),C());const t=document.querySelector(".full-screen-content");o.addEventListener("timeupdate",(()=>{H(),C();const e=s>0?s-1:s,n=i>0?i-1:i;t.innerHTML=`<h2>${A[e].eng}</h2> <p>${A[e].it}</p>`,t.style.backgroundImage=`url(${l[n]})`})),o.addEventListener("ended",(()=>{document.querySelector(".fullscreenoverlay").style.display="none",b.style.opacity="0",b.style.pointerEvents="none"})),H(),r=!0})),document.querySelector(".full-screen-close").addEventListener("click",(function(){document.querySelector(".fullscreenoverlay").style.display="none"}));const A=[{start:8,eng:"How does a moment last forever",it:"Come può un momento durare per sempre",end:12},{start:13,eng:"How can a story never die",it:"Come può una storia non morire mai",end:15},{start:16,eng:"It is love we must hold onto",it:"È l'amore a cui dobbiamo aggrapparci",end:20},{start:21,eng:"Never easy, but we try",it:"Mai facile, ma ci proviamo",end:25},{start:26,eng:"Sometimes our happiness is captured",it:"A volte la nostra felicità è catturata",end:29},{start:30,eng:"Somehow, our time and place stand still",it:"In qualche modo, il nostro tempo e il nostro luogo si fermano",end:33},{start:34,eng:"Love lives on inside our hearts and always will",it:"L'amore vive nei nostri cuori e sempre lo farà",end:42},{start:43,eng:"Minutes turn to hours",it:"I minuti si trasformano in ore",end:47},{start:48,eng:"Days to years and gone",it:"I giorni diventano anni e svaniscono",end:52},{start:53,eng:"But when all else has been forgotten",it:"Ma quando tutto il resto è stato dimenticato",end:56},{start:57,eng:"Still our song lives on",it:"Ancora la nostra canzone vive",end:63},{start:64,eng:"Maybe some moments weren't so perfect",it:"Forse alcuni momenti non erano così perfetti",end:68},{start:69,eng:"Maybe some moments not so sweet",it:"Forse alcuni momenti non erano così dolci",end:72},{start:73,eng:"But we have to know some bad times or our lives are incomplete",it:"Ma dobbiamo conoscere alcuni momenti difficili o le nostre vite sono incomplete",end:80},{start:81,eng:"Then when the shadows overtake us",it:"Poi quando le ombre ci sopraffanno",end:85},{start:86,eng:"Just when we feel all hope is gone",it:"Proprio quando sentiamo che tutta la speranza è persa",end:89},{start:90,eng:"We'll hear our song and know once more",it:"Sentiremo la nostra canzone e sapremo ancora una volta",end:93},{start:94,eng:"Our love lives on",it:"Il nostro amore vive",end:99},{start:105,eng:"Ooooo, Ooooo, Oooo",it:"Ooooo, Ooooo, Oooo",end:117},{start:121,eng:"How does a moment last forever",it:"Come può un momento durare per sempre",end:124},{start:125,eng:"How does our happiness endure",it:"Come resiste la nostra felicità",end:128},{start:129,eng:"Through the darkest of our troubles",it:"Attraverso i più bui dei nostri guai",end:132},{start:133,eng:"Love is beauty, love is pure",it:"L'amore è bellezza, l'amore è puro",end:136},{start:137,eng:"Love pays no mind to desolation",it:"L'amore non presta attenzione alla desolazione",end:140},{start:141,eng:"It flows like a river to the soul",it:"Scorre come un fiume verso l'anima",end:144},{start:145,eng:"Protects, perceives and perseveres",it:"Protegge, percepisce e persevera",end:148},{start:149,eng:"And makes us whole",it:"E ci rende completi",end:153},{start:154,eng:"Minutes turn to hours",it:"I minuti si trasformano in ore",end:157},{start:158,eng:"Days to years then gone",it:"I giorni diventano anni e poi svaniscono",end:164},{start:165,eng:"But when all else has been forgotten",it:"Ma quando tutto il resto è stato dimenticato",end:169},{start:170,eng:"Still our song lives on",it:"Ancora la nostra canzone vive",end:177},{start:178,eng:"How does a moment last forever",it:"Come può un momento durare per sempre",end:182},{start:183,eng:"When our song lives on",it:"Quando la nostra canzone vive",end:194},{start:195,eng:"Thanks be to God",it:"DEO GRATIAS",end:222}];function H(){const e=c.querySelector(".friend-description"),t=c.querySelector(".friends-left img"),n=A[s].start,r=A[s].end,a=1e3*(r-n);o.currentTime>=n&&o.currentTime<=r&&s<A.length&&(e.innerHTML=`<h2>${A[s].eng}</h2> <p>${A[s].it}</p>`,i<l.length&&(t.src=l[i],i=(i+1)%l.length),e.querySelector("h2").classList.add("fade-in"),e.querySelector("p").classList.add("fade-in"),setTimeout((()=>{e.querySelector("h2").classList.remove("fade-in"),e.querySelector("p").classList.remove("fade-in")}),a),s++)}}));
